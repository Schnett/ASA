<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-ZXELZ94ES3"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-ZXELZ94ES3');
    </script>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <script src="https://unpkg.com/image-compare-viewer@1.5.0/dist/image-compare-viewer.min.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/image-compare-viewer/dist/image-compare-viewer.min.css">
    <style>
    * {
      box-sizing: border-box;
    }

    html * {
      font-family: Nunito, sans-serif;
    }

    body {
      margin: 0;
      padding: 0;
      -ms-overflow-style: none;  /* IE and Edge */
      scrollbar-width: none;  /* Firefox */
    }

    /* Hide scrollbar for Chrome, Safari and Opera */
    body::-webkit-scrollbar {
      display: none;
    }

    footer {
      z-index: 100;
      position: fixed;
      bottom: 0;
      left: 0;
      width: 100%;
      background-color: #333; /* You can change the background color to your preference */
      color: #fff; /* You can change the text color to your preference */
      min-height: 5%;
      display: flex;
      justify-content: center;
      align-items: center;
      text-align: center;
      padding: 10px 0;
    }

    header {
      z-index: 100;
      position: relative;
      width: 100%;
      background-color: #333; /* You can change the background color to your preference */
      color: #fff; /* You can change the text color to your preference */
      text-align: center;
      padding: 10px 0;
    }

    main {
      margin-top: 1px;
    }

    .column {
      float: left;
      padding: 1%;
    }

    .left, .right {
      width: 17%;
    }

    .middle {
      width: 66%;
    }

    .spacer {
      padding-bottom: 5%;
    }

    .bigspacer {
      padding-bottom: 10%;
    }
    
    .performance {
      text-align: center;
      font-size: large;
    }

    .caption {
      text-align: center;
      font-size: small;
    }

    .row:after {
      content: "";
      display: table;
      clear: both;
    }

    .code-snippet {
      background-color: #333; /* Dark background color */
      color: #fff; /* Text color */
      padding: 10px; /* Padding to create space around the code */
      font-family: 'Courier New', monospace; /* Use a monospace font for code */
      border-radius: 10px; /* Add rounded corners */
      width: 400px; /* Set a specific width for the code box */
      margin: 10px; /* Reduce the margin to create less spacing */
    }

    .code-container {
            display: flex;
            flex-direction: column;
            align-items: center; /* Center-align code boxes horizontally */
            justify-content: center; /* Center-align code boxes vertically */
        }

    </style>
     <title>ASA: Performance Guide</title>
     <link rel="icon" type="image/x-icon" href="favicon.png">
  </head>

  <body>
    <header>
      <h1>ASA: Performance Guide</h1>
    </header>
    <footer>
      <div id="copyFooter">Click To Copy</i>
      </div>
    </footer>
    <main>
      <div class="row">
        <div class="column left"></div>
        <div class="column middle">
          <p class="performance">Browse to ..\Steam\steamapps\common\ARK Survival Ascended\ShooterGame\Saved\Config\Windows and open the <b>GameUserSettings.ini.</b></p>
          <p class="performance">Edit the Scalability Settings:</p>
            <div class="code-container">
              <div class="code-snippet">
                  <pre>
                    <code>
                      [ScalabilityGroups]
                      sg.ResolutionQuality=66
                      sg.ViewDistanceQuality=1
                      sg.AntiAliasingQuality=0
                      sg.ShadowQuality=0
                      sg.GlobalIlluminationQuality=0
                      sg.ReflectionQuality=1
                      sg.PostProcessQuality=0
                      sg.TextureQuality=0
                      sg.EffectsQuality=0
                      sg.FoliageQuality=0
                      sg.ShadingQuality=0
                    </code>
                  </pre>
                  <div class="caption">For Maximum Performance</div>
                </div>
                  <div class="code-snippet">
                    <pre>
                    <code>
                      [ScalabilityGroups]
                      sg.ResolutionQuality=66
                      sg.ViewDistanceQuality=2
                      sg.AntiAliasingQuality=1
                      sg.ShadowQuality=0
                      sg.GlobalIlluminationQuality=2
                      sg.ReflectionQuality=1
                      sg.PostProcessQuality=0
                      sg.TextureQuality=1
                      sg.EffectsQuality=0
                      sg.FoliageQuality=0
                      sg.ShadingQuality=0
                    </code>
                  </pre>
                  
              <div class="caption">For better Quality & Good Performance</div>
              </div>
            </div>
            
          <p class="performance">If you cannot enable DLSS (requires NVIDIA RTX 2060 or higher), use <b>sg.ResolutionQuality 100</b></p>
          <div class="spacer"></div>
          <p class="performance">Use the <b>image slider</b> to chose the command. <b>Click on the text</b> on the bottom of the page to copy the command. Then paste it into the ARK Console.</b></p>
          <div class="spacer"></div>
          <div class="image-compare" data-before="Better Performance <br/> r.VolumetricCloud 0" data-after="r.VolumetricCloud 1">
            <img src="img/cloud0.jpg"/>
            <img src="img/cloud.jpg"/>
          </div>
          <p class="performance">Performance Impact: <b>Medium</b></p>
          <p class="caption">Volumetric Clouds: Disable to save performance.</p>

          <div class="spacer"></div>
          <div class="image-compare" data-before="Better Performance <br/> r.VolumetricFog 0" data-after="r.VolumetricFog 1">
            <img src="img/fog.jpg"/>
            <img src="img/fog1.jpg"/>
          </div>
          <p class="performance">Performance Impact: <b>Low</b></p>
          <p class="caption">Volumetric Fog: Disable to save performance.</p>

          <div class="spacer"></div>
          <div class="image-compare" data-before="Better Performance <br/> sg.GlobalIlluminationQuality 1" data-after="sg.GlobalIlluminationQuality 2">
            <img src="img/lumen0.jpg"/>
            <img src="img/lumen1.jpg"/>
          </div>
          <div class="image-compare" data-before="Better Performance <br/> sg.GlobalIlluminationQuality 1" data-after="sg.GlobalIlluminationQuality 2">
            <img src="img/lumencave0.jpg"/>
            <img src="img/lumencave1.jpg"/>
          </div>
          <p class="performance">Performance Impact: <b>High</b></p>
          <p class="caption">Lumen: Dynamic Global Illumnation is expensive. You won't see a big difference unless in caves. They can be grey if Lumen is disabled. Even with Lumen enabled, you should disable Lumen Reflections (r.Lumen.Reflections.Allow 0) to save performance.</p>

          <div class="spacer"></div>
          <div class="image-compare" data-before="r.SkylightIntensityMultiplier 1" data-after="r.SkylightIntensityMultiplier 3">
            <img src="img/skylight1.jpg"/>
            <img src="img/skylight3.jpg"/>
          </div>
          <p class="performance">Performance Impact: <b>None</b></p>
          <p class="caption">Skylight: If Lumen and Volumetric Clouds are disabled, the shadows will be dark. Increasing the Skylight Intensity can help there.</p>

          <div class="spacer"></div>
          <div class="image-compare" data-before="Better Performance <br/> r.Shadow.Virtual.Enable 0 | r.Shadow.CSM.MaxCascades 0" data-after="r.Shadow.Virtual.Enable 1">
            <img src="img/distancefieldnocascade.jpg"/>
            <img src="img/virtualshadow.jpg"/>
          </div>
          <p class="performance">Performance Impact: <b>High</b></p>
          <p class="caption">Virtual Shadow Maps: Dynamic shadows are expensive. You can disable them and only keep static Distance Field Shadows. Note: Characters and Dinos won't cast shadows with this option.</p>

          <div class="spacer"></div>
          <div class="image-compare" data-before="Better Performance <br/> r.ContactShadows 0" data-after="r.ContactShadows 1">
            <img src="img/distancefield.jpg"/>
            <img src="img/distancefield+contact.jpg"/>
          </div>
          <p class="performance">Performance Impact: <b>Low</b></p>
          <p class="caption">Contact Shadows: Small detail shadows for grass, rocks.</p>

          <div class="spacer"></div>
          <div class="image-compare" data-before="Better Performance <br/> wp.Runtime.HLOD 0" data-after="wp.Runtime.HLOD 1">
            <img src="img/wpHLOD0.jpg"/>
            <img src="img/wpHLOD1.jpg"/>
          </div>
          <p class="performance">Performance Impact: <b>Medium</b></p>
          <p class="caption">HLODs: Can be disabled to save performance. Note: This can now be disbled in the Video Settings</p>

          <div class="spacer"></div>
          <div class="image-compare" data-before="Better Performance <br/> grass.SizeScale 0" data-after="grass.SizeScale 1 (default)">
            <img src="img/grass0.jpg"/>
            <img src="img/grass2.jpg"/>
          </div>
          <p class="performance">Performance Impact: <b>Medium</b></p>
          <p class="caption">Landscape Grass: The amount of foliage can be changed by using sg.FoliageQuality 0-3 or in the Video Settings Foliage Quality: Low-Epic</p>

          <div class="bigspacer"></div>
        </div>
        <div class="column right"></div>
      </div>
    </main>   
  </body>

  <script>
    // consolecommand
    let commandStorage = [];
    let commandList = [
      ["r.VolumetricCloud 0", "r.VolumetricCloud 1"],
      ["r.VolumetricFog 0", "r.VolumetricFog 1"],
      ["", ""],
      ["sg.GlobalIlluminationQuality 1", "sg.GlobalIlluminationQuality 2 | r.Lumen.Reflections.Allow 0"],      
      ["r.SkylightIntensityMultiplier 1", "r.SkylightIntensityMultiplier 3"],
      ["r.Shadow.Virtual.Enable 0 | r.Shadow.CSM.MaxCascades 0 | r.DistanceFieldShadowing 1", "r.Shadow.Virtual.Enable 1"],
      ["r.ContactShadows 0", "r.ContactShadows 1"],
      ["wp.Runtime.HLOD 0", ""],
      ["grass.SizeScale 0", ""]
    ]

    // get footer
    const footer = document.getElementById('copyFooter');

    // copy footer text on click
    footer.addEventListener('click', () => {
      navigator.clipboard.writeText(footer.textContent);
    });

    // get all image compares
    let imageCompareViewers = document.querySelectorAll(".image-compare");
    console.log(imageCompareViewers.length);
    let config = 
    {
      controlColor: "#FFFFFF",
      controlShadow: true,
      addCircle: false,
      addCircleBlur: true,

      startingPoint: 50,
      showLabels: true,
      labelOptions: {
        before: 'Before',
        after: 'After'
      }
    };

    // init all image compares
    imageCompareViewers.forEach((element, index) => {
      // load starting point from local storage
      let startingPoints = [];
      if (localStorage.getItem("startingPoints") != null)
        startingPoints = JSON.parse(localStorage.startingPoints);

      config.startingPoint = 50;
      commandStorage[index] = 1;
      if (startingPoints[index] != null)
      {
        config.startingPoint = startingPoints[index]
        startingPoints[index] < 50 ? commandStorage[index] = 1 : commandStorage[index] = 0;
      }

      // set labels from dataset
      config.labelOptions.before = element.dataset.before;
      config.labelOptions.after = element.dataset.after;

      let imageCompare = new ImageCompare(element, config);
      imageCompare.mount();
      imageCompare.index = index;
      imageCompare.el.addEventListener("mouseup", () => { 
        let startingPoints = [];
        if (localStorage.getItem("startingPoints") != null)
          startingPoints = JSON.parse(localStorage.startingPoints);
        let startingPoint = 100 - parseInt(String(imageCompare.wrapper.style.width).slice(5, 7));
        startingPoints[imageCompare.index] = startingPoint;
        localStorage.setItem("startingPoints", JSON.stringify(startingPoints));

        startingPoint > 50 ? commandStorage[imageCompare.index] = 0 : commandStorage[imageCompare.index] = 1;
        updateFooter();
      });
      updateFooter();
    });

    function updateFooter()
    {
      let commandText = '';
      commandStorage.forEach((element, index) => {
        if (element != null && commandList[index][element] != "")
          if (commandText === '')
            commandText = commandText.concat('', commandList[index][element]);
          else
            commandText = commandText.concat(' | ', commandList[index][element]);
      });

      footer.textContent = commandText;
    }
  </script>
</html>
